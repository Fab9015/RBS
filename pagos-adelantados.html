<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Pagos Adelantados – Condominio RBS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="img/favicon.png" type="image/png">
  <link rel="stylesheet" href="styles/main.css">
  <meta name="description"
    content="Información sobre pagos adelantados y opciones para vecinos — Reserva Bosque Sereno.">
  <meta property="og:title" content="Pagos Adelantados – Condominio RBS">
  <meta property="og:description"
    content="Información sobre pagos adelantados y opciones para vecinos — Reserva Bosque Sereno.">
  <meta property="og:image" content="https://fab9015.github.io/RBS/img/logo.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="600">
  <meta property="og:image:height" content="400">
  <meta property="og:url" content="https://fab9015.github.io/RBS/pagos-adelantados.html">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="es_MX">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Pagos Adelantados – Condominio RBS">
  <meta name="twitter:description"
    content="Información sobre pagos adelantados y opciones para vecinos — Reserva Bosque Sereno.">
  <meta name="twitter:image" content="https://fab9015.github.io/RBS/img/logo.png">
  <link rel="canonical" href="https://fab9015.github.io/RBS/pagos-adelantados.html">
  <style>
    @media (max-width: 768px) {
      .container {
        margin: inherit;
      }
    }
  </style>

</head>

<body>
  <header>
    <div class="header-text">
      <h1>Pagos Adelantados – Información y Opciones</h1>
      <p>Información sobre pagos adelantados y opciones para vecinos</p>
    </div>
    <img src="img/logo.png" alt="Logo Reserva Bosque Sereno">
  </header>

  <!-- Menu fragment (injected) -->
  <div id="menuInclude"></div>

  <div class="container">
    <!-- Introducción -->
    <div class="section">
      <h2>Contexto</h2>
      <p>
        En la transición administrativa de noviembre constatamos que varias cuotas de mantenimiento pagadas por
        adelantado por vecinos no fueron entregadas al comité entrante. La administración anterior destinó esos fondos
        al pago de servicios comunes, justificando su decisión en la falta de aprobación de incrementos por parte de la
        asamblea.
      </p>
      <p>
        Queremos dejar claro que esos recursos nunca llegaron a la nueva administración, por lo que la responsabilidad
        de su uso corresponde únicamente a la gestión saliente. Reconocemos la preocupación que esta situación genera y,
        con un enfoque transparente y solidario, presentamos alternativas que permitan atender el problema sin
        comprometer la estabilidad financiera del condominio.
      </p>
      <p>
        Todas las propuestas se basan en montos comprobados mediante recibos o comprobantes bancarios. Nuestro objetivo
        es encontrar acuerdos que ofrezcan soluciones equitativas y que preserven el interés colectivo.
      </p>
    </div>
    <!-- Notas finales -->
    <div class="section notes">
      <h2>Notas importantes</h2>
      <ul>
        <li>
          La aceptación, rechazo o ausencia de participación en los acuerdos aquí planteados no exime a ningún condómino
          de la obligación de cubrir puntualmente la cuota mensual de mantenimiento.
          En caso de incumplimiento, se aplicarán sin excepción las disposiciones establecidas en el reglamento interno
          y los acuerdos de asamblea vigentes.
        </li>
        <li>
          Todos los acuerdos se basarán únicamente en los montos comprobados mediante recibos oficiales o comprobantes
          bancarios válidos.
        </li>
        <li>
          No se hará referencia a mensualidades específicas, sino exclusivamente a cantidades de dinero verificadas y
          documentadas.
        </li>
        <li>
          El objetivo es encontrar soluciones que, sin afectar los intereses colectivos del condominio, permitan atender
          la situación de manera justa, transparente y conforme a derecho.
        </li>
      </ul>
    </div>
    <!-- Opciones -->
    <div class="section">
      <h2>Opciones de Solución</h2>

      <div class="option">
        <h3>1. Asamblea General y Cuota Extraordinaria</h3>
        <p>
          Presentar el tema en la asamblea general y solicitar una cuota extraordinaria que permita recuperar los pagos
          adelantados.
          El argumento principal es que los recursos fueron utilizados en beneficio de todos los vecinos al cubrir
          servicios comunes.
        </p>
        <p><strong>Ventajas:</strong> Recuperación total de los montos adelantados.</p>
        <p><strong>Desventajas:</strong> Incluso quienes ya habían pagado por adelantado tendrían que aportar la cuota.
        </p>
        <p><strong>Riesgos:</strong> Que la asamblea no apruebe la medida y se pierda la oportunidad de recuperar el
          dinero.</p>
      </div>

      <div class="option">
        <h3>2. Acuerdos Voluntarios con Vecinos</h3>
        <p>
          Se propone llegar a acuerdos voluntarios con quienes realizaron pagos adelantados. Estos acuerdos pueden
          combinarse entre sí,
          reduciendo progresivamente el número de vecinos pendientes de solución.
        </p>
        <ul>
          <li><strong>Acuerdo 1:</strong> Vecinos que comprendan que el recurso nunca llegó a la nueva administración y
            decidan, de manera solidaria, no exigir su devolución.</li>
          <li><strong>Acuerdo 2:</strong> Aplicar el monto adelantado como parte del pago por el uso del salón de
            eventos. El costo del salón es de $1050; las cuotas adelantadas (de $600 cada una) se descontarían de ese
            monto.</li>
          <li><strong>Acuerdo 3:</strong> Organizar una rifa en el condominio con premios equivalentes a cuotas
            ordinarias. La participación sería abierta y transparente, y lo recaudado se destinaría a cubrir los pagos
            adelantados.</li>
          <li><strong>Acuerdo 4:</strong> Para quienes no participen en los acuerdos anteriores, o para quienes aún
            tengan un resto de dinero pendiente tras optar por acuerdos 2 o 3, el monto adelantado se aplicaría en
            cuotas ordinarias de $100 en $100 hasta cubrir el total.
            Este mecanismo asegura que todo monto quede reconocido sin comprometer los ingresos regulares del
            condominio.</li>
        </ul>
      </div>
    </div>
    <!-- Indicadores resumen -->
    <div class="section">
      <h2>Resumen de Pagos Adelantados</h2>
      <div class="row">
        <div class="col card">
          <h3>Total recaudado</h3>
          <p id="total"></p>
        </div>
        <div class="col card">
          <h3>Condóminos</h3>
          <p id="count"></p>
        </div>
      </div>
    </div>

    <!-- Gráficos -->
    <div class="section">
      <h2>Visualización de Datos</h2>
      <div style="height:300px;">
        <canvas id="barSector"></canvas>
      </div>
      <div style="height:300px; margin-top:2em;">
        <canvas id="histMontos"></canvas>
      </div>
      <div style="height:300px; margin-top:2em;">
        <canvas id="barMontos"></canvas>
        <div>
          <span style="color:#a1b27a;">■ SABINO</span>
          <span style="color:#5c4033;">■ SAKURA</span>
          <span style="color:#d4c4a8;">■ SEQUOIA</span>
        </div>
      </div>
    </div>

    <!-- Tabla -->
    <div class="section">
      <h2>Detalle de Pagos Adelantados</h2>
      <table id="tablaPagos" style="width:100%; border-collapse:collapse;">
        <thead>
          <tr style="background:#a1b27a; color:#fff;">
            <th style="padding:8px; border:1px solid var(--color-border);">Domicilio</th>
            <th style="padding:8px; border:1px solid var(--color-border);">Meses</th>
            <th style="padding:8px; border:1px solid var(--color-border);">Monto</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Definir colores por calle (paleta más contrastante)
      const coloresCalles = {
        "SABINO": "#a1b27a",
        "SAKURA": "#5c4033",
        "SEQUOIA": "#d4c4a8"
      };


      /* Centralized EMBEDDED_PAGOS is provided by includes/embedded-data.js as window.EMBEDDED_PAGOS */

      async function loadPagos() {
        let data = null;
        try {
          const resp = await fetch('pagos_adelantados.json', { cache: 'no-store' });
          if (!resp.ok) throw new Error('No se pudo cargar pagos_adelantados.json');
          data = await resp.json();
        } catch (err) {
          console.warn('Fetch pagos_adelantados.json failed, attempting embedded fallback.', err);

          // If embedded data already present, use it
          if (window && window.EMBEDDED_PAGOS) {
            data = window.EMBEDDED_PAGOS;
          } else {
            // If opened via file:// try to inject the embedded-data script (load-fragments may already add it)
            if (location.protocol === 'file:') {
              try {
                if (!document.querySelector('script[src="includes/embedded-data.js"]')) {
                  const s = document.createElement('script');
                  s.src = 'includes/embedded-data.js';
                  s.async = true;
                  document.head.appendChild(s);
                }
              } catch (e) { /* ignore */ }

              // Wait briefly for the embedded global to appear
              const start = Date.now();
              while (!window.EMBEDDED_PAGOS && Date.now() - start < 1200) {
                // simple sleep
                await new Promise(r => setTimeout(r, 100));
              }
            }

            if (window && window.EMBEDDED_PAGOS) {
              data = window.EMBEDDED_PAGOS;
            } else {
              console.warn('No embedded fallback available for pagos_adelantados.json');
              return; // abort
            }
          }
        }

        // indicadores resumen
        document.getElementById('total').textContent = "$" + data.resumen.total.toLocaleString();
        document.getElementById('count').textContent = data.resumen.count;

        // Gráfica 1: Total por sector
        new Chart(document.getElementById('barSector'), {
          type: 'bar',
          data: {
            labels: data.sectores.labels,
            datasets: [{ label: 'Total por sector', data: data.sectores.values, backgroundColor: '#a1b27a' }]
          },
          options: { responsive: true, maintainAspectRatio: false }
        });

        // Gráfica 2: Histograma de montos
        new Chart(document.getElementById('histMontos'), {
          type: 'bar',
          data: {
            labels: data.rangos.labels,
            datasets: [{ label: 'Vecinos', data: data.rangos.values, backgroundColor: '#5c4033' }]
          },
          options: { responsive: true, maintainAspectRatio: false }
        });

        // Gráfica 3: Montos por domicilio con colores por calle
        const colores = data.montos.labels.map(l => {
          const calle = l.split(" ")[0];
          return coloresCalles[calle];
        });

        new Chart(document.getElementById('barMontos'), {
          type: 'bar',
          data: {
            labels: data.montos.labels.map(l => l.split(" ")[1]), // solo número
            datasets: [{
              label: 'Monto por domicilio',
              data: data.montos.values,
              backgroundColor: colores
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return data.montos.labels[context.dataIndex] + ": $" + context.formattedValue;
                  }
                }
              },
              legend: { display: false }
            },
            scales: {
              x: {
                ticks: {
                  autoSkip: false,
                  maxRotation: 90, // etiquetas verticales
                  minRotation: 90,
                  font: {
                    size: window.innerWidth < 600 ? 6 : 10
                  }
                }
              }
            }
          }
        });

        // tabla detalle
        const tbody = document.querySelector('#tablaPagos tbody');
        data.detalle.forEach(d => {
          tbody.innerHTML += `<tr>
          <td style="padding:6px; border:1px solid var(--color-border);">${d.domicilio}</td>
          <td style="padding:6px; border:1px solid var(--color-border);">${d.meses}</td>
          <td style="padding:6px; border:1px solid var(--color-border);">$${d.monto}</td>
        </tr>`;
        });
      }

      loadPagos();
    </script>



  </div> <!-- cierre container -->

  <div id="footerInclude"></div>
  <script src="includes/load-fragments.js"></script>
</body>

</html>